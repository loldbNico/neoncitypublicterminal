/* RAID.CSS â€” Twitch Raid Alert Overlay (Windows-popups + cyberpunk crash/boot)
   Use with RAID.HTML (OBS Browser Source or local file).
*/

:root{
  --yl: #ffd34d;
  --cy: #60baff;
  --bg0: rgba(3,5,12,.92);
  --bg1: rgba(6,10,22,.88);
  --glowY: 0 0 18px rgba(255,211,77,.35), 0 0 42px rgba(255,211,77,.18);
  --glowC: 0 0 18px rgba(96,186,255,.35), 0 0 42px rgba(96,186,255,.18);
  --winShadow: 0 18px 60px rgba(0,0,0,.55);
  --uiFont: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --monoFont: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}

html,body{
  width:100%;
  height:100%;
  margin:0;
}

body{
  background: transparent;
  overflow:hidden;
  font-family: var(--uiFont);
}

/* Stage */
#stage{
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity: 0;
}

#stage.active{ opacity:1; }

.layer{
  position:absolute;
  inset:0;
}

/* Ambient cyberpunk vignette */
#vignette{
  background:
    radial-gradient(1200px 700px at 30% 20%, rgba(96,186,255,.14), transparent 65%),
    radial-gradient(900px 650px at 70% 80%, rgba(255,211,77,.10), transparent 65%),
    linear-gradient(180deg, rgba(3,5,12,.78), rgba(6,10,22,.62));
  opacity: .85;
}

/* Scanlines + noise */
#fx{
  mix-blend-mode: screen;
}

#fx::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.06) 0px,
      rgba(255,255,255,.06) 1px,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,0) 4px
    );
  opacity:.18;
}

#fx::after{
  content:"";
  position:absolute;
  inset:-30px;
  background:
    radial-gradient(2px 2px at 25% 15%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(2px 2px at 60% 70%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(1px 1px at 35% 50%, rgba(255,255,255,.10), transparent 55%),
    radial-gradient(1px 1px at 80% 30%, rgba(255,255,255,.08), transparent 55%);
  opacity: .25;
  animation: noiseDrift 1.15s steps(2,end) infinite;
  filter: blur(.4px);
}

@keyframes noiseDrift{
  0%{ transform: translate3d(0,0,0); }
  20%{ transform: translate3d(-12px, 8px, 0); }
  40%{ transform: translate3d(10px, -14px, 0); }
  60%{ transform: translate3d(-6px, -10px, 0); }
  80%{ transform: translate3d(14px, 6px, 0); }
  100%{ transform: translate3d(0,0,0); }
}

/* Global shake/glitch during spam/crash */
#stage.spam #vignette{
  animation: vignettePulse .45s ease-in-out infinite;
}

@keyframes vignettePulse{
  0%,100%{ opacity:.80; filter: saturate(1.0) contrast(1.0); }
  50%{ opacity:.95; filter: saturate(1.3) contrast(1.15); }
}

#stage.spam{
  animation: stageShake 220ms steps(2,end) infinite;
}

#stage.crash{
  animation: stageShake 90ms steps(2,end) infinite;
}

@keyframes stageShake{
  0%{ transform: translate3d(0,0,0); }
  25%{ transform: translate3d(-4px, 2px,0); }
  50%{ transform: translate3d(3px, -3px,0); }
  75%{ transform: translate3d(-2px, -4px,0); }
  100%{ transform: translate3d(0,0,0); }
}

/* Popups layer */
#popLayer{ position:absolute; inset:0; }

.popup{
  position:absolute;
  width: 360px;
  max-width: min(360px, calc(100vw - 24px));
  border: 1px solid rgba(96,186,255,.35);
  background: rgba(9,13,28,.88);
  box-shadow: var(--winShadow), var(--glowC);
  overflow:hidden;
  transform: translate3d(0,0,0) scale(.96);
  opacity: 0;
  filter: blur(.2px);
  animation: popIn 220ms ease-out forwards;
}

.popup.warn{
  border-color: rgba(255,211,77,.45);
  box-shadow: var(--winShadow), var(--glowY);
}

.popup.fatal{
  border-color: rgba(255, 77, 120, .52);
  box-shadow: var(--winShadow);
}

@keyframes popIn{
  from{ opacity:0; transform: translate3d(0,8px,0) scale(.97); }
  to{ opacity:1; transform: translate3d(0,0,0) scale(1); filter: blur(0); }
}

.popup.out{
  animation: popOut 260ms ease-in forwards;
}

@keyframes popOut{
  to{ opacity:0; transform: translate3d(0,10px,0) scale(.985); filter: blur(.6px); }
}

.titlebar{
  height: 28px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 0 8px 0 10px;
  background:
    linear-gradient(90deg, rgba(255,211,77,.18), rgba(96,186,255,.12)),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.18));
  border-bottom: 1px solid rgba(96,186,255,.22);
  color: rgba(215,230,255,.92);
  font-size: 12px;
  letter-spacing: .4px;
  text-transform: uppercase;
}

.popup.warn .titlebar{ border-bottom-color: rgba(255,211,77,.24); }

.winbtns{ display:flex; gap:6px; }

.winbtn{
  width: 11px; height: 11px;
  border-radius: 2px;
  border: 1px solid rgba(215,230,255,.32);
  background: rgba(6,10,22,.35);
}

.winbtn.close{ border-color: rgba(255, 77, 120, .55); }

.popup-body{
  padding: 10px 12px 12px;
  color: rgba(215,230,255,.80);
  font-size: 12px;
  line-height: 1.35;
}

.popup-body .code{
  font-family: var(--monoFont);
  font-size: 11px;
  color: rgba(255,211,77,.85);
}

.popup-body .sub{
  margin-top: 6px;
  color: rgba(215,230,255,.58);
}

/* Glitch stripe on some popups */
.popup.glitch::after{
  content:"";
  position:absolute;
  left:-20%;
  top: 36px;
  width: 140%;
  height: 10px;
  background: linear-gradient(90deg, transparent, rgba(96,186,255,.22), rgba(255,211,77,.22), transparent);
  transform: skewX(-14deg);
  opacity: .0;
  animation: glitchStripe .7s steps(2,end) infinite;
  pointer-events:none;
}

@keyframes glitchStripe{
  0%{ opacity:0; transform: translate3d(-30px, 0,0) skewX(-14deg); }
  30%{ opacity:.55; }
  55%{ opacity:0; }
  100%{ opacity:.35; transform: translate3d(60px, 0,0) skewX(-14deg); }
}

/* Crash layer */
#crashLayer{
  display:none;
  place-items:center;
}

#stage.crash #crashLayer{
  display:grid;
}

.crash-card{
  width: min(880px, calc(100vw - 28px));
  background: rgba(6,10,22,.90);
  border: 1px solid rgba(255,211,77,.35);
  box-shadow: var(--winShadow), var(--glowY);
  overflow:hidden;
}

.crash-top{
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255,211,77,.22);
  background:
    linear-gradient(90deg, rgba(255,211,77,.14), rgba(96,186,255,.10)),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.18));
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: rgba(215,230,255,.92);
  font-size: 12px;
}

.crash-mid{
  padding: 14px;
  display:grid;
  gap: 10px;
}

.crash-title{
  font-size: 20px;
  letter-spacing: 1.2px;
  color: rgba(255,211,77,.92);
}

.crash-sub{
  font-family: var(--monoFont);
  font-size: 12px;
  color: rgba(215,230,255,.78);
}

.crash-log{
  height: 220px;
  overflow:hidden;
  background: rgba(4,7,16,.45);
  border: 1px solid rgba(96,186,255,.22);
  padding: 10px 12px;
  font-family: var(--monoFont);
  font-size: 11px;
  line-height: 1.35;
  color: rgba(96,186,255,.82);
}

.crash-log .hot{ color: rgba(255,211,77,.90); }

/* Blackout */
#blackout{
  opacity:0;
  background: #000;
  transition: opacity .18s linear;
}

#stage.blackout #blackout{ opacity:1; }

/* Boot layer (inspired by existing boot overlay style) */
#bootLayer{
  display:none;
  place-items:center;
}

#stage.booting #bootLayer{ display:grid; }

.boot{
  width: min(760px, calc(100vw - 40px));
  border: 1px solid rgba(96,186,255,.25);
  background: rgba(6,10,22,.78);
  box-shadow: var(--winShadow), var(--glowC);
  position: relative;
  overflow:hidden;
}

.boot::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(900px 600px at 30% 20%, rgba(96,186,255,.14), transparent 60%),
    radial-gradient(700px 500px at 70% 70%, rgba(255,211,77,.10), transparent 62%);
  opacity:.9;
  pointer-events:none;
}

.boot-top{
  position:relative;
  padding: 14px 16px 10px;
  border-bottom: 1px solid rgba(96,186,255,.25);
  display: grid;
  gap: 6px;
  text-transform: uppercase;
  letter-spacing: 1.2px;
}

.boot-tag{
  display:inline-block;
  width: fit-content;
  padding: 4px 10px;
  background: rgba(255,211,77,.92);
  color: rgba(10,16,36,.95);
  box-shadow: var(--glowY);
  font-size: 12px;
}

.boot-title{ font-size: 14px; color: rgba(96,186,255,.95); position:relative; }
.boot-sub{ font-size: 12px; color: rgba(215,230,255,.62); position:relative; }

.boot-mid{ position:relative; padding: 14px 16px 16px; }

.boot-lines{
  height: 210px;
  border: 1px solid rgba(255,211,77,.18);
  background: rgba(4,7,16,.45);
  overflow: hidden;
  padding: 10px 12px;
  font-family: var(--monoFont);
  font-size: 12px;
  line-height: 1.35;
  color: rgba(255,211,77,.85);
}

.boot-bar{
  margin-top: 12px;
  height: 10px;
  border: 1px solid rgba(255,211,77,.25);
  background: rgba(4,7,16,.35);
  overflow:hidden;
}

.boot-bar-fill{
  width: 0%;
  height: 100%;
  background: rgba(255,211,77,.85);
  box-shadow: var(--glowY);
  transition: width .18s linear;
}

.boot-meta{
  margin-top: 10px;
  display:flex;
  justify-content: space-between;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: rgba(215,230,255,.65);
}

#bootPct{ color: rgba(255,211,77,.92); }

.boot-foot{
  position:relative;
  padding: 10px 16px;
  border-top: 1px solid rgba(96,186,255,.25);
  display:flex;
  justify-content: space-between;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: rgba(215,230,255,.55);
}

/* Final raid popup */
#finalLayer{
  display:none;
  place-items:center;
}

#stage.reveal #finalLayer{ display:grid; }

.final-popup{
  width: min(560px, calc(100vw - 28px));
  border: 1px solid rgba(255,211,77,.45);
  background: rgba(9,13,28,.90);
  box-shadow: var(--winShadow), var(--glowY);
  overflow:hidden;
  animation: finalIn 360ms ease-out both;
}

@keyframes finalIn{
  from{ opacity:0; transform: translate3d(0,14px,0) scale(.985); filter: blur(.8px); }
  to{ opacity:1; transform: translate3d(0,0,0) scale(1); filter: blur(0); }
}

.final-titlebar{
  height: 30px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 0 10px 0 12px;
  background:
    linear-gradient(90deg, rgba(255,211,77,.22), rgba(96,186,255,.10)),
    linear-gradient(180deg, rgba(255,255,255,.07), rgba(0,0,0,.18));
  border-bottom: 1px solid rgba(255,211,77,.22);
  color: rgba(215,230,255,.92);
  font-size: 12px;
  letter-spacing: .6px;
  text-transform: uppercase;
}

.final-body{
  padding: 14px 16px 16px;
  display:grid;
  gap: 8px;
}

.final-headline{
  font-size: 22px;
  color: rgba(255,211,77,.95);
  letter-spacing: .8px;
}

.final-rows{
  display:flex;
  justify-content: space-between;
  gap: 14px;
  font-size: 13px;
  color: rgba(215,230,255,.82);
}

.final-rows b{
  color: rgba(96,186,255,.92);
  font-weight: 600;
}

.final-foot{
  padding: 10px 16px;
  border-top: 1px solid rgba(96,186,255,.25);
  font-size: 11px;
  letter-spacing: 1.1px;
  text-transform: uppercase;
  color: rgba(215,230,255,.55);
}

/* Fade out / reset */
#stage.fading{
  transition: opacity .55s ease;
  opacity: 0;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #fx::after,
  #stage.spam,
  #stage.crash,
  #stage.spam #vignette{ animation: none !important; }
  .popup{ animation: none; opacity: 1; }
}
